{% extends 'base.html' %}


{% block content %}
   <div>
       <img alt="avatar" src={{ current_user.get_avatar_link(128) }}>
       <p>Username: {{ current_user.username }}</p>
       {% if posts %}
        {% for post in posts %}
            <p >{{ post.body }} at <span class="post_timestamp">{{post.timestamp.isoformat()}} </span></p>
        {% endfor %}
       {% endif %}

   </div>

{% endblock content %}

{% block scripts %}
{{ super() }}
<script src="https://cdn.jsdelivr.net/npm/luxon@2.3.0/build/global/luxon.min.js"></script>

<script>
    const posts_times = document.getElementsByClassName('post_timestamp');
    [...posts_times].forEach((element) => {
        element.innerText = luxon.DateTime.fromISO(element.innerText,{zone:'utc'}).toLocal().toLocaleString(luxon.DateTime.DATETIME_MED)}
    );

</script>
{% endblock scripts %}